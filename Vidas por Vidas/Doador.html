<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/Doador.css" type="text/css">
    <title>Projeto Vidas por Vidas</title>
</head>
<body>
    
    <!--area cabeçalho-->
    <header id="area-cabecalho">
        <div>
            <!--area logo-->
            <div id="area-logo">
                <figure>
                    <img width="75px" src="assets/imagem/loogo.png" alt="Logo do Projeto Vidas por Vidas" />
                </figure>
                <a href="index.html"><h1>Vidas por Vidas</h1></a>
            </div>
        </div>

        <!--area menu-->
        <div id="area-menu">
            <a href="Doador.html">Seja um Doador</a><br>
            <a href="SobreNos.html">Sobre nós</a>
        </div>
    </header>
    
    <!-- Botão do leitor de texto -->
    <button class="btn-leitor" id="btnToggleLeitor" title="Ler/Parar leitura">
        <i>🔊</i>
    </button>

    <!--area principal-->
    <main id="area-principal">
        
        <!--postagem 1-->
        <div class="postagem">
            <h2>Seja um doador:</h2>
            <button class="btn-leitura-secao" data-texto="Seja um doador: Chave Pix: 42984411217. AAPE ASSOCIAÇÃO DE AMIGOS E PESSOAS ESPECIAIS. Sua doação ajuda a transformar vidas. Contribua com qualquer valor.">
                <i>🔊</i> Ler esta seção
            </button>
            <figure>
                <img class="imagem" width="80%" src="assets/imagem/pix.png" alt="QR Code e informações para doação via PIX" />
            </figure>
            <p>Chave Pix: 42984411217 <br>
                AAPE ASSOCIAÇÃO DE AMIGOS E PESSOAS ESPECIAIS 
            </p>
        </div>

        <!--postagem 2-->
        <div class="postagem">
            <h2>Venha até nós: </h2>
            <button class="btn-leitura-secao" data-texto="Venha até nós: Estamos localizados em Guarapuava. Visite nosso projeto e conheça de perto o trabalho que realizamos. Sua presença e apoio são muito importantes para nós.">
                <i>🔊</i> Ler esta seção
            </button>
            <figure>
                <iframe class="mapa"
                    src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d14419.56490066423!2d-51.4904823!3d-25.3749618!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ef371ada1e4259%3A0x821809c79423c083!2sProjeto%20Vidas%20por%20Vidas!5e0!3m2!1spt-BR!2sbr!4v1720210560313!5m2!1spt-BR!2sbr"
                    width="100%" height="350" style="border:0;" allowfullscreen="" loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
            </figure>
        </div>
    </main>

    <footer>
        <div class="logo">
            <figure>
                <img class="imagem" src="assets/imagem/loogo.png" width="100" alt="Logo do Projeto Vidas por Vidas">
            </figure>
        </div>
        <div class="menu">
            <ul>
                <li><a href="SobreNos.html">Sobre Nós</a></li>
                <li><a href="Doador.html">Seja um Doador</a></li>
            </ul>
        </div>
        <div class="social-media">
            <a href="https://www.facebook.com/projetovidasporvidas.guarapuava/" target="_blank">
                <figure>
                    <img class="imagem" width="70" src="assets/imagem/face.webp" alt="Ícone do Facebook - Siga-nos">
                </figure>
                <i class="fa fa-facebook"></i>
            </a>
            <a href="https://l.instagram.com/?u=https%3A%2F%2Fapi.whatsapp.com%2Fsend%3Fphone%3D5542998178421&e=AT3KPqiVjb2cxH0ZZ5sXVFqwPlDRsJQWLyYCUGhYNwLz6-_eju8VZFexUhyYFqGYMJNQ7FZZhGf2XLQOpxAIB-jqcSCnkvap_qSpyGYZB5mr7i7Erq5_zw"
                target="_blank">
                <figure>
                    <img class="imagem" width="50" src="assets/imagem/whatsapp.webp" alt="Ícone do WhatsApp - Entre em contato">
                </figure>
                <i class="fa fa-whatsapp"></i>
            </a>
            <a href="https://www.instagram.com/projetovidasporvidas/" target="_blank">
                <figure>
                    <img class="imagem" width="70" src="assets/imagem/inst.png" alt="Ícone do Instagram - Siga-nos">
                </figure>
                <i class="fa fa-instagram"></i>
            </a>
        </div>
        <div class="p">
            <i>
                <p>&copy; 2024 Todos os direitos reservados.</p><br>
                <p>Designed and developed by: Rafael Szeuczuk and Carlos Alexandre Bueno - CC UNICENTRO</p>
            </i>
        </div>
    </footer>

    <script>
        const suporteLeitura = 'speechSynthesis' in window;
        
        if (!suporteLeitura) {
            document.getElementById('btnToggleLeitor').style.display = 'none';
        } else {
            const btnToggleLeitor = document.getElementById('btnToggleLeitor');
            const botoesSecao = document.querySelectorAll('.btn-leitura-secao');
            
            const sintese = window.speechSynthesis;
            let vozAtiva = null;
            let elementoDestacado = null;
            
            function configurarVoz() {
                const vozes = sintese.getVoices();
                const vozesPTBR = vozes.filter(voz => voz.lang === 'pt-BR' || voz.lang.startsWith('pt'));
                
                vozAtiva = vozesPTBR.find(voz => voz.name.includes('Maria') || voz.name.includes('Luciana')) || 
                          vozesPTBR.find(voz => voz.gender === 'female') || 
                          vozesPTBR[2] || 
                          vozes.find(voz => voz.lang.startsWith('pt')) || 
                          vozes[2];
                
                if (vozAtiva) {
                    btnToggleLeitor.disabled = false;
                    botoesSecao.forEach(botao => {
                        botao.disabled = false;
                    });
                } else {
                    btnToggleLeitor.disabled = true;
                    botoesSecao.forEach(botao => {
                        botao.disabled = true;
                    });
                }
            }
            
            function inicializarVoz() {
                const vozes = sintese.getVoices();
                if (vozes.length > 0) {
                    configurarVoz();
                } else {
                    sintese.onvoiceschanged = configurarVoz;
                }
            }
            
            inicializarVoz();
            
            function lerTexto(texto, elemento) {
                if (!vozAtiva) {
                    alert('Nenhuma voz de leitura disponível no seu navegador. Tente usar Chrome ou Edge.');
                    return;
                }
                
                pararLeitura();
                
                if (elementoDestacado) {
                    elementoDestacado.classList.remove('texto-lendo');
                }
                
                if (elemento) {
                    elemento.classList.add('texto-lendo');
                    elementoDestacado = elemento;
                    elemento.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                
                const fala = new SpeechSynthesisUtterance(texto);
                fala.voice = vozAtiva;
                fala.lang = 'pt-BR';
                fala.rate = 0.7;
                fala.pitch = 1.0;
                fala.volume = 1.0;
                
                fala.onend = function() {
                    btnToggleLeitor.classList.remove('ativo');
                    
                    if (elementoDestacado) {
                        elementoDestacado.classList.remove('texto-lendo');
                        elementoDestacado = null;
                    }
                };
                
                fala.onerror = function() {
                    btnToggleLeitor.classList.remove('ativo');
                    
                    if (elementoDestacado) {
                        elementoDestacado.classList.remove('texto-lendo');
                        elementoDestacado = null;
                    }
                    
                    alert('Erro ao reproduzir áudio.');
                };
                
                sintese.speak(fala);
                
                btnToggleLeitor.classList.add('ativo');
            }
            
            function pararLeitura() {
                if (sintese.speaking) {
                    sintese.cancel();
                    btnToggleLeitor.classList.remove('ativo');
                    
                    if (elementoDestacado) {
                        elementoDestacado.classList.remove('texto-lendo');
                        elementoDestacado = null;
                    }
                }
            }
            
            btnToggleLeitor.addEventListener('click', function() {
                if (sintese.speaking) {
                    pararLeitura();
                } else {
                    if (botoesSecao.length > 0) {
                        const primeiroBotao = botoesSecao[0];
                        lerTexto(primeiroBotao.dataset.texto, primeiroBotao.parentElement);
                    }
                }
            });
            
            botoesSecao.forEach(botao => {
                botao.addEventListener('click', function() {
                    lerTexto(this.dataset.texto, this.parentElement);
                });
            });
            
            window.addEventListener('beforeunload', pararLeitura);
            
            setTimeout(inicializarVoz, 1000);
        }
    </script>
</body>
</html>